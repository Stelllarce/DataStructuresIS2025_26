# Queue (Опашка)

## Какво е Queue?

**Queue** (опашка) е линейна структура от данни, която следва принципа **FIFO** (First In, First Out) - "първи влязъл, първи излязъл". Това означава, че първият елемент, който е бил добавен в опашката, ще бъде първият, който ще бъде премахнат.

Представете си опашка от хора пред касата в магазина - първият човек, който е застанал на опашката, ще бъде обслужен първи.

![Queue FIFO принцип](https://media.geeksforgeeks.org/wp-content/cdn-uploads/20221213113312/Queue-Data-Structures.png)

## Основни операции

Queue поддържа следните основни операции:

- **enqueue(element)** / **push(element)** - добавя елемент в края на опашката
- **dequeue()** / **pop()** - премахва и връща елемента от началото на опашката
- **front()** - връща елемента от началото без да го премахва
- **back()** - връща елемента от края без да го премахва
- **empty()** - проверява дали опашката е празна
- **size()** - връща броя на елементите в опашката

## Сложност на операциите

| Операция | Сложност |
|----------|----------|
| enqueue  | O(1)     |
| dequeue  | O(1)     |
| front    | O(1)     |
| back     | O(1)     |
| empty    | O(1)     |

## Приложения на Queue

Queue се използва в много ситуации:

1. **BFS (Breadth-First Search)** - обхождане на графи и дървета на ширина
2. **Буферизация** - обработка на задачи в реда, в който са постъпили
3. **Планиране на процеси** - CPU scheduling
5. **Асинхронна обработка** - message queues, event handling

---

# Deque (Double-Ended Queue)

## Какво е Deque?

**Deque** (произнася се "дек") е съкращение от **Double-Ended Queue** (опашка с два края). Това е обобщение на опашката, което позволява добавяне и премахване на елементи и от двата края - от началото и от края.

Deque комбинира възможностите на Stack и Queue в една структура.

![Deque структура](https://media.geeksforgeeks.org/wp-content/uploads/20250701150127717176/Deque.webp)

<details>
<summary><b>Как изглежда в STL</b></summary>

![STL deque](https://i.sstatic.net/2m7Yk.png)
</details>

## Основни операции

Deque поддържа всички операции на Queue, плюс допълнителни:

- **push_front(element)** - добавя елемент в началото
- **push_back(element)** - добавя елемент в края
- **pop_front()** - премахва елемент от началото
- **pop_back()** - премахва елемент от края
- **front()** - връща елемента от началото
- **back()** - връща елемента от края
- **empty()** - проверява дали е празна
- **size()** - връща броя на елементите

## Сложност на операциите

| Операция   | Сложност |
|------------|----------|
| push_front | O(1)     |
| push_back  | O(1)     |
| pop_front  | O(1)     |
| pop_back   | O(1)     |
| front      | O(1)     |
| back       | O(1)     |
| operator[] | O(1)*    |

\* При имплементация с кръгов буфер или chunked array

## Приложения на Deque

Deque е полезна в следните сценарии:

1. **Sliding Window алгоритми** - намиране на максимум/минимум в прозорец
2. **Undo/Redo функционалност** - history management
3. **Работа с палиндроми** - проверка и обработка от двата края
4. **Job scheduling** - добавяне на задачи с различен приоритет

**Предимства на std::deque:**

- Бърз достъп от двата края (O(1))
- Random access с operator[] (O(1))
- Не преразпределя паметта при добавяне/премахване
- По-ефективна от std::vector при операции в началото

## Кога да използваме какво?

### Използвай Queue когато

- Трябва да обработваш елементи в реда, в който са добавени (FIFO)
- Имплементираш BFS алгоритъм
- Работиш с буфериране или планиране на задачи
- Не ти трябва достъп до елементи в средата

### Използвай Deque когато

- Трябва да добавяш/премахваш от двата края
- Имплементираш sliding window алгоритми
- Трябва ти и stack, и queue функционалност
- Искаш random access към елементите
- Често добавяш елементи в началото (по-бързо от vector)

### Използвай Stack когато

- Трябва ти LIFO поведение
- Имплементираш DFS, backtracking, или parsing
- Работиш с рекурсивни структури итеративно

## Полезни ресурси

- [Как е имплементиран deque в STL (линкът вътре, сравняващ перформънс с std::vector също е интересен)](https://stackoverflow.com/questions/6292332/what-really-is-a-deque-in-stl)

## Задачи

[Циклична двустранна опашка {MEDIUM}](https://leetcode.com/problems/design-circular-deque/description/)
